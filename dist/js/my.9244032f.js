import{g as S,c as z}from"./index.db9bc9a4.js";import{_ as De}from"./_plugin-vue_export-helper.c27b6911.js";import{O as j,I as r,J as u,a3 as s,T as d,D as je,F as Be,H as c,a6 as G,a7 as K,K as a,L as i,R as e,a1 as U,aj as Pe,N as Q,aF as g,ac as h,aB as _,a9 as oe,aG as O,M as ne,aa as Te,ab as qe,aC as v,aH as Re}from"./index.9ba2f0f9.js";import{L as ae,a as se}from"./LayoutList.d54085c0.js";const Ve={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},He=s("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[s("path",{d:"M4 6h16"}),s("path",{d:"M4 12h16"}),s("path",{d:"M4 18h12"})],-1),Ae=[He],re=j({name:"AlignJustified",render:function(b,N){return r(),u("svg",Ve,Ae)}}),Je={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Oe=s("path",{d:"M5 12l5 5L20 7",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Ee=[Oe],Ge=j({name:"Check",render:function(b,N){return r(),u("svg",Je,Ee)}}),Ke={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Qe=s("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[s("circle",{cx:"5",cy:"12",r:"1"}),s("circle",{cx:"12",cy:"12",r:"1"}),s("circle",{cx:"19",cy:"12",r:"1"})],-1),We=[Qe],W=j({name:"Dots",render:function(b,N){return r(),u("svg",Ke,We)}}),Xe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Ye=s("path",{d:"M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Ze=[Ye],ie=j({name:"Folder",render:function(b,N){return r(),u("svg",Xe,Ze)}}),et={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},tt=s("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[s("path",{d:"M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2"}),s("path",{d:"M12 10v6"}),s("path",{d:"M9 13h6"})],-1),lt=[tt],ot=j({name:"FolderPlus",render:function(b,N){return r(),u("svg",et,lt)}});const de=y=>(Te("data-v-d63b1863"),y=y(),qe(),y),nt={style:{"margin-left":"25px","margin-top":"10px"}},at={style:{display:"flex","margin-top":"20px"}},st={style:{"margin-top":"2px"}},rt=["onClick"],it=de(()=>s("div",null,null,-1)),dt={key:0},ut={style:{height:"85vh","overflow-y":"auto","overflow-x":"hidden"}},ct={key:1},vt=de(()=>s("div",{style:{display:"flex",margin:"5px","margin-bottom":"20px"}},[s("text",{style:{"font-size":"16px"}},"我的文件夹")],-1)),pt={style:{height:"80vh","overflow-y":"auto","overflow-x":"hidden"}},ft={style:{display:"flex","align-items":"center","margin-bottom":"5px"}},mt={key:1},_t={key:0,style:{"margin-left":"auto"}},yt={key:1,style:{"margin-left":"auto"}},gt={key:1},ht={key:0,class:"card-container"},kt=["src"],wt={style:{margin:"auto",display:"flex","margin-top":"10px"}},xt={style:{margin:"auto"}},bt={key:1,style:{"margin-top":"20px","margin-bottom":"20px","margin-left":"20px"}},Ct={style:{display:"flex","justify-content":"flex-end","margin-top":"20px"}},X=10,It={__name:"my",setup(y){const b=t=>()=>v(_,null,{default:()=>v(t)}),N=t=>"href"in t?v("a",{href:t.href,target:"_blank"},t.label):t.label,ue=t=>v(_,null,{default:()=>t.key==="all"?v(re):v(ie)}),ce=[{name:"项目",key:"project"},{name:"模板",key:"template"},{name:"素材",key:"element"}],ve=[{label:"平铺",key:"grid",icon:b(ae)},{label:"列表",key:"list",icon:b(se)}],Y=[{label:"移动",key:"move"},{label:"切换",key:"switch"},{label:"删除",key:"delete"}],p=d("project"),C=t=>{switch(p.value=t,t){case"project":S("/project/folder",{},l=>{f.value=[{key:"all",label:"全部"},...l.folderList.map(n=>({key:n.id,value:n.id,label:n.folderName}))],console.log(f.value)},M),S("/project",{},l=>{k.value=l.projectList.map(n=>({id:n.id,name:n.projectName,src:n.projectUrl,isPublic:n.isPublic==1?"公开":"私有",fileUrl:n.fileUrl,editTime:n.editTime})),console.log(k.value),J.value=!1},M).then(()=>{m("all")});break;case"template":S("/template/folder",{},l=>{f.value=[{key:"all",label:"全部"},...l.folderList.map(n=>({key:n.id,value:n.id,label:n.folderName}))],console.log(f.value)},M),S("/template/my",{},l=>{k.value=l.list.map(n=>({id:n.id,name:n.templateName,src:n.templateUrl,folderId:n.folderId,isPublic:n.isPublic==1?"公开":"私有",fileUrl:n.fileUrl,editTime:n.createTime})),console.log(k.value),J.value=!1},M).then(()=>{m("all")});break;case"element":S("/element/folder",{},l=>{f.value=[{key:"all",label:"全部"},...l.folderList.map(n=>({key:n.id,value:n.id,label:n.folderName}))],console.log(f.value)},M),S("/element/my",{},l=>{k.value=l.elementList.map(n=>({id:n.id,name:n.elementName,src:n.elementUrl,isPublic:n.isPublic==1?"公开":"私有",folderId:n.folderId,editTime:n.createTime,prompt:n.prompt})),console.log(k.value),J.value=!1},M).then(()=>{m("all")});break;default:console.log("unknown tab key!")}},B=d("grid"),pe=t=>{B.value=t},D=d(!1),I=d(0),fe=je([{label:"重命名文件夹",key:4},{label:"删除文件夹",key:5}]),P=d(!1),T=d(!1);function me(t){switch(t){case 4:return P.value=!0;case 5:return T.value=!0}}const q=d(null),F=d(!1),R=d(!1),V=d(null);function Z(t){switch(t){case"move":return F.value=!0;case"switch":return Ie();case"delete":return R.value=!0}}function _e(){z("/folder/delete",{id:q.value,type:p.value},t=>{console.log(t)}),C(p.value).then(m(w.value))}function ye(){F.value=!1,z("/folder/move",{id:q.value,type:p.value,folderId:V.value},t=>{console.log(t)}),C(p.value).then(m(w.value))}const $=d(null);function ge(){console.log($.value),z("/folder/rename",{id:I.value,name:$.value},l=>{console.log(l)});const t=f.value.find(l=>l.key===I.value);t.label=$.value,P.value=!1,$.value=null}const f=d([{label:"平铺",key:"grid"},{label:"列表",key:"list"}]),he=[{title:"预览图",key:"src",render(t){return v(Re,{width:"40px",src:t.src})}},{title:"名称",key:"name"},{title:"更新时间",key:"editTime"},{title:"是否公开",key:"isPublic"},{title:"操作",key:"opreation",render(t){return v(O,{trigger:"hover",placement:"bottom-start",options:Y,onSelect:l=>{q.value=t.id,Z(l)}},{default:()=>v(g,{size:"small",quaternary:!0,style:{marginLeft:"auto"}},{default:()=>v(_,null,{default:()=>v(W)})})})}}];Be(()=>{C("project")});const k=d([]),H=d([]),A=d([]),J=d(!0),ke=d(he),L=d(1),ee=d(1),w=d("all");function m(t){w.value=t,we(t)}function we(t){t==="all"?A.value=k.value:A.value=k.value.filter(l=>l.folderId===t),L.value=1,ee.value=Math.ceil(A.value.length/X),te()}function te(){const t=(L.value-1)*X,l=L.value*X;H.value=A.value.slice(t,l)}const xe=t=>t.id;function be(){z("/folder/delete",{id:I.value},t=>{console.log(t)}),C(p.value).then(m("all"))}function Ce(){z("/folder/new",{type:p.value},t=>{console.log(t)}),C(p.value).then(m(w.value))}function Ie(){z("/folder/switch",{id:I.value},t=>{console.log(t)}),C(p.value).then(m(w.value))}function M(t){console.log(t)}return(t,l)=>{const n=c("divider"),$e=c("n-menu"),Ne=c("n-input"),Fe=c("n-layout-sider"),Le=c("n-data-table"),le=c("n-card"),Me=c("n-pagination"),Se=c("n-layout-content"),ze=c("n-layout"),E=c("n-modal"),Ue=c("n-select");return r(),u("div",null,[s("div",nt,[s("div",at,[s("div",st,[(r(),u(G,null,K(ce,o=>s("text",{onClick:x=>C(o.key),style:{cursor:"pointer","font-size":"15px","margin-right":"15px"},key:o.key,class:Pe({"active-tab":e(p)===o.key})},Q(o.name),11,rt)),64))]),it,a(e(O),{trigger:"hover",options:ve,onSelect:pe},{default:i(()=>[a(e(g),{quaternary:"",size:"small"},{icon:i(()=>[e(B)==="grid"?(r(),h(e(_),{key:0},{default:i(()=>[a(e(ae))]),_:1})):oe("",!0),e(B)==="list"?(r(),h(e(_),{key:1},{default:i(()=>[a(e(se))]),_:1})):oe("",!0)]),_:1})]),_:1})]),a(n,{style:{"margin-top":"5px"}}),a(ze,{"has-sider":""},{default:i(()=>[a(Fe,{bordered:"","collapse-mode":"width","collapsed-width":64,width:200,collapsed:e(D),"show-trigger":"",onCollapse:l[2]||(l[2]=o=>D.value=!0),onExpand:l[3]||(l[3]=o=>D.value=!1)},{default:i(()=>[e(D)?(r(),u("div",dt,[s("div",ut,[a($e,{collapsed:e(D),"collapsed-width":64,"collapsed-icon-size":22,options:e(f),"onUpdate:value":l[0]||(l[0]=(o,x)=>{m(o)}),"render-label":N,"render-icon":ue},null,8,["collapsed","options"])])])):(r(),u("div",ct,[vt,s("div",pt,[(r(!0),u(G,null,K(e(f),o=>(r(),u("div",{key:o.key},[s("div",null,[s("div",ft,[a(e(g),{onClick:x=>m(o.key),secondary:e(w)===o.key,strong:e(w)===o.key,quaternary:e(w)!==o.key},{icon:i(()=>[a(e(_),null,{default:i(()=>[o.key==="all"?(r(),h(e(re),{key:0})):(r(),h(e(ie),{key:1}))]),_:2},1024)]),default:i(()=>[o.key===e(I)&&e(P)==!0?(r(),h(Ne,{key:0,size:"tiny",maxlength:"10",minlength:"2","show-count":"",value:e($),"onUpdate:value":l[1]||(l[1]=x=>U($)?$.value=x:null),style:{width:"100px"}},null,8,["value"])):(r(),u("text",mt,Q(o.label),1))]),_:2},1032,["onClick","secondary","strong","quaternary"]),o.key!="all"?(r(),u("div",_t,[o.key===e(I)&&e(P)==!0?(r(),h(e(g),{key:0,quaternary:"",onClick:ge},{default:i(()=>[a(e(_),null,{default:i(()=>[a(e(Ge))]),_:1})]),_:1})):(r(),h(e(O),{key:1,trigger:"hover",placement:"bottom-start",options:e(fe),onSelect:x=>{I.value=o.key,me(x)}},{default:i(()=>[a(e(g),{quaternary:"",style:{"font-size":"15px"}},{default:i(()=>[a(e(_),null,{default:i(()=>[a(e(W))]),_:1})]),_:1})]),_:2},1032,["options","onSelect"]))])):(r(),u("div",yt,[a(e(g),{quaternary:"",onClick:Ce},{default:i(()=>[a(e(_),{size:"16"},{default:i(()=>[a(e(ot))]),_:1})]),_:1})]))])])]))),128))])]))]),_:1},8,["collapsed"]),a(Se,{style:{"margin-left":"10px","margin-right":"20px","margin-bottom":"20px"}},{default:i(()=>[e(B)==="list"?(r(),h(Le,{key:0,remote:"",ref:"table",columns:e(ke),data:e(H),loading:e(J),"row-key":xe},null,8,["columns","data","loading"])):(r(),u("div",gt,[e(H).length!=0?(r(),u("div",ht,[(r(!0),u(G,null,K(e(H),o=>(r(),h(le,{key:o.id,hoverable:""},{cover:i(()=>[s("img",{src:o.src},null,8,kt)]),default:i(()=>[s("div",wt,[s("text",xt,Q(o.name),1),a(e(O),{trigger:"hover",placement:"bottom-start",options:Y,onSelect:x=>{q.value=o.id,Z(x)}},{default:i(()=>[a(e(g),{quaternary:"",size:"small",style:{"margin-left":"auto"}},{default:i(()=>[a(e(_),null,{default:i(()=>[a(e(W))]),_:1})]),_:1})]),_:2},1032,["onSelect"])])]),_:2},1024))),128))])):(r(),u("text",bt," 无数据 "))])),a(Me,{style:{display:"flex","justify-content":"center","margin-top":"20px"},page:e(L),"onUpdate:page":[l[4]||(l[4]=o=>U(L)?L.value=o:null),te],"page-count":e(ee)},null,8,["page","page-count"])]),_:1})]),_:1})]),a(E,{preset:"dialog",title:"删除文件夹",type:"error",content:"删除后，文件夹中的内容将移动至默认文件夹。","positive-text":"确认","negative-text":"取消",onPositiveClick:l[5]||(l[5]=o=>be()),onNegativeClick:t.onNegativeClick,show:e(T),"onUpdate:show":l[6]||(l[6]=o=>U(T)?T.value=o:null)},null,8,["onNegativeClick","show"]),a(E,{preset:"dialog",title:"删除",type:"error",content:"删除后将永远无法恢复。","positive-text":"确认","negative-text":"取消",onPositiveClick:l[7]||(l[7]=o=>_e()),onNegativeClick:t.onNegativeClick,show:e(R),"onUpdate:show":l[8]||(l[8]=o=>U(R)?R.value=o:null)},null,8,["onNegativeClick","show"]),a(E,{show:e(F),"onUpdate:show":l[11]||(l[11]=o=>U(F)?F.value=o:null)},{default:i(()=>[a(le,{style:{width:"600px"},title:"移动至",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{default:i(()=>[a(Ue,{value:e(V),"onUpdate:value":l[9]||(l[9]=o=>U(V)?V.value=o:null),options:e(f)},null,8,["value","options"]),s("div",Ct,[a(e(g),{size:"small",style:{"margin-right":"10px"},onClick:l[10]||(l[10]=o=>F.value=!1)},{default:i(()=>[ne(" 取消 ")]),_:1}),a(e(g),{type:"primary",size:"small",onClick:ye},{default:i(()=>[ne("确定")]),_:1})])]),_:1})]),_:1},8,["show"])])}}},zt=De(It,[["__scopeId","data-v-d63b1863"]]);export{zt as default};
