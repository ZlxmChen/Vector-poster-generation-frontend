import{g as C,c as Y}from"./index.db9bc9a4.js";import{_ as Z}from"./_plugin-vue_export-helper.c27b6911.js";import{L as z,a as D}from"./LayoutList.d54085c0.js";import{T as l,F as ee,H as p,I as s,J as _,a3 as c,a6 as S,a7 as F,K as i,L as r,R as a,aj as te,N as j,aF as N,ac as k,aB as T,a9 as w,aG as ae,M as oe,a1 as ne,aa as le,ab as se,aC as b,aH as ie}from"./index.9ba2f0f9.js";const re=f=>(le("data-v-d38bb483"),f=f(),se(),f),ce={style:{"margin-left":"25px","margin-top":"10px"}},de={style:{display:"flex","margin-top":"20px"}},ue={style:{"margin-top":"2px"}},pe=["onClick"],me=re(()=>c("div",null,null,-1)),_e={key:0,class:"card-container"},fe=["src"],ve={style:{margin:"auto",display:"flex","margin-top":"10px"}},ge={style:{margin:"auto"}},ye={key:1,style:{"margin-top":"20px","margin-bottom":"20px","margin-left":"20px"}},L=10,he={__name:"trash",setup(f){const P=t=>()=>b(T,null,{default:()=>b(t)}),V=[{name:"项目",key:"project"},{name:"模板",key:"template"},{name:"素材",key:"element"}],M=[{label:"平铺",key:"grid",icon:P(z)},{label:"列表",key:"list",icon:P(D)}],m=l("project"),x=t=>{switch(m.value=t,t){case"project":C("/project/trash",{},o=>{d.value=o.projectList.map(e=>({id:e.id,name:e.projectName,src:e.projectUrl,isPublic:e.isPublic==1?"公开":"私有",fileUrl:e.fileUrl,editTime:e.editTime})),console.log(d.value),h.value=!1}).then(()=>{I("all")});break;case"template":C("/template/trash",{},o=>{d.value=o.list.map(e=>({id:e.id,name:e.templateName,src:e.templateUrl,folderId:e.folderId,isPublic:e.isPublic==1?"公开":"私有",fileUrl:e.fileUrl,editTime:e.createTime})),console.log(d.value),h.value=!1}).then(()=>{I("all")});break;case"element":C("/element/trash",{},o=>{d.value=o.elementList.map(e=>({id:e.id,name:e.elementName,src:e.elementUrl,isPublic:e.isPublic==1?"公开":"私有",folderId:e.folderId,editTime:e.creatTime,prompt:e.prompt})),console.log(d.value),h.value=!1}).then(()=>{I("all")});break;default:console.log("unknown tab key!")}},v=l("grid"),A=t=>{v.value=t},G=[{title:"预览图",key:"src",render(t){return b(ie,{width:"40px",src:t.src})}},{title:"名称",key:"name"},{title:"更新时间",key:"editTime"},{title:"是否公开",key:"isPublic"},{title:"操作",key:"opreation",render(t){return b(N,{size:"small",secondary:!0,onClick:()=>{B(t.id)}},{default:()=>"恢复"})}}];ee(()=>{x(m.value)});const d=l([]),g=l([]),y=l([]),h=l(!0),H=l(G),u=l(1),R=l(1),K=l("all");function I(t){K.value=t,$(t)}function $(t){t==="all"?y.value=d.value:y.value=d.value.filter(o=>o.folderId===t),u.value=1,R.value=Math.ceil(y.value.length/L),U()}function U(){const t=(u.value-1)*L,o=u.value*L;g.value=y.value.slice(t,o)}const q=t=>t.id;function B(t){Y("/folder/recoverItem",{id:t,type:m.value},o=>{console.log(o)}),x(m.value)}return(t,o)=>{const e=p("divider"),E=p("n-data-table"),J=p("n-card"),O=p("n-pagination"),Q=p("n-layout-content"),W=p("n-layout");return s(),_("div",null,[c("div",ce,[c("div",de,[c("div",ue,[(s(),_(S,null,F(V,n=>c("text",{onClick:X=>x(n.key),style:{cursor:"pointer","font-size":"15px","margin-right":"15px"},key:n.key,class:te({"active-tab":a(m)===n.key})},j(n.name),11,pe)),64))]),me,i(a(ae),{trigger:"hover",options:M,onSelect:A},{default:r(()=>[i(a(N),{quaternary:"",size:"small"},{icon:r(()=>[a(v)==="grid"?(s(),k(a(T),{key:0},{default:r(()=>[i(a(z))]),_:1})):w("",!0),a(v)==="list"?(s(),k(a(T),{key:1},{default:r(()=>[i(a(D))]),_:1})):w("",!0)]),_:1})]),_:1})]),i(e,{style:{"margin-top":"5px"}}),i(W,{"has-sider":""},{default:r(()=>[i(Q,{style:{"margin-left":"10px","margin-right":"20px","margin-bottom":"20px"}},{default:r(()=>[a(v)==="list"?(s(),k(E,{key:0,remote:"",ref:"table",columns:a(H),data:a(g),loading:a(h),"row-key":q},null,8,["columns","data","loading"])):w("",!0),c("div",null,[a(g).length!=0?(s(),_("div",_e,[(s(!0),_(S,null,F(a(g),n=>(s(),k(J,{key:n.id,hoverable:""},{cover:r(()=>[c("img",{src:n.src},null,8,fe)]),default:r(()=>[c("div",ve,[c("text",ge,j(n.name),1),i(a(N),{secondary:"",size:"small",style:{"margin-left":"auto"},onClick:X=>B(n.id)},{default:r(()=>[oe(" 恢复 ")]),_:2},1032,["onClick"])])]),_:2},1024))),128))])):(s(),_("text",ye," 无数据 "))]),i(O,{style:{display:"flex","justify-content":"center","margin-top":"20px"},page:a(u),"onUpdate:page":[o[0]||(o[0]=n=>ne(u)?u.value=n:null),U],"page-count":a(R)},null,8,["page","page-count"])]),_:1})]),_:1})])])}}},Te=Z(he,[["__scopeId","data-v-d38bb483"]]);export{Te as default};
